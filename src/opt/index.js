"use strict";!function(){var o=io(),n=document.querySelector("canvas"),u=n.width,l=n.height,c=n.getContext("2d"),t=function(){n.addEventListener("mousemove",function(e){var t={x:Math.trunc(e.layerX/n.clientHeight*u),y:Math.trunc(e.layerY/n.clientWidth*l)},a=c.createImageData(1,1),r=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(document.querySelector("[type=color]").value);a.data[0]=r.r,a.data[1]=r.g,a.data[2]=r.b,a.data[3]=255,o.emit("pixel update",{pos:t,pixel:{r:a.data[0],g:a.data[1],b:a.data[2],a:a.data[3]}}),c.putImageData(a,t.x,t.y)})};o.on("pixel update",function(e){var t=e.pos,a=c.createImageData(1,1);a.data[0]=e.pixel.r,a.data[1]=e.pixel.g,a.data[2]=e.pixel.b,a.data[3]=e.pixel.a,c.putImageData(a,t.x,t.y)}),document.querySelector("form").addEventListener("submit",function(e){e.preventDefault();var t=document.querySelector("#username").value;return localStorage.setItem("user",t),o.emit("user registration",{user:t,color:document.querySelector("[type=color]").value}),!1}),o.on("user registration",function(e){console.log(e.user,localStorage.getItem("user")),e.user&&(document.querySelector("ul").innerHTML+="\n                <li>".concat(e.msg,"</li>\n            ")),e.user==localStorage.getItem("user")&&(t(),console.log("booting app"))}),o.on("online users",function(e){console.log(e)})}();